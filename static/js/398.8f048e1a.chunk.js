(self.webpackChunkclient=self.webpackChunkclient||[]).push([[398],{6383:function(e,t){var n=this;t.status=function(e){var t=[],n=[],s=[],a=[];if(e.classes.map((function(e){return"present"!==e.attend&&"late"!==e.attend||t.push(e),"absent"!==e.attend&&"camera_off"!==e.attend||n.push(e),"sick"===e.attend&&s.push(e),"leave"===e.attend&&a.push(e),null})),t.length+n.length+s.length+a.length===e.classes.length){var r=t.length+n.length+s.length+a.length,c="present";return t.length===r&&(c="present"),s.length>1&&(c="sick"),a.length>1&&(c="leave"),n.length>0&&(c="absent"),{f_status:c,total_class:r,presents:t,absents:n,sicks:s,leaves:a}}},t.counter=function(e){var t,s=(t=Array.isArray(e.online_attendance)?e.online_attendance.map(n.status):n.status(e.online_attendance)).length||1,a=[],r=[],c=[],i=[];if(Array.isArray(t))t.map((function(t){return t?(t.f_status&&"present"===t.f_status&&a.push(t),!t.f_status||"absent"!==t.f_status&&"camera_off"!==t.attend||r.push(t),t.f_status&&"sick"===t.f_status&&c.push(t),t.f_status&&"leave"===t.f_status&&i.push(t),null):console.log(e)}));else{var o=t;"present"===o.f_status&&a.push(o),"absent"!==o.f_status&&"camera_off"!==o.attend||r.push(o),"sick"===o.f_status&&c.push(o),"leave"===o.f_status&&i.push(o)}if(a.length+r.length+c.length+i.length===s)return{present_percent:100*a.length/s,class_count:s,presents:a,absents:r,sicks:c,leaves:i}},t.filter=function(e){var t,n=e.data,s=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.update_date,a=[],r=n.data;if(r.map((function(e){return e.online_attendance.map((function(t){if(t.date===s){var n={student:e,attendance:t};a.push(n)}return null})),null})),a.length===r.length)return a},t.bdDate=function(){var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),n=new Date(t+216e5),s="",a="";return s=n.getMonth()<10?"0".concat(n.getMonth()+1):n.getMonth()+1,a=n.getDate()<10?"0".concat(n.getDate()):n.getDate(),{date:"".concat(n.getFullYear(),"-").concat(s,"-").concat(a),all:n}}},8836:function(e){e.exports=function(e){}},8216:function(e,t,n){"use strict";var s=n(8152),a=n(6383),r=n(2791),c=n(184);t.Z=function(e){for(var t=e.d,n=e.inputs,i=e.rev,o=t.data,l=(0,r.useState)(!1),d=(0,s.Z)(l,2),u=d[0],h=d[1],p=(0,r.useState)(!1),x=(0,s.Z)(p,2),f=x[0],m=x[1],b=(0,r.useState)(!1),_=(0,s.Z)(b,2),v=_[0],g=_[1],w=[],j=[],y=[],k=[],N=function(e){var t=e.target.value;"absent"===t?u?(h(!1),m(!1),g(!1)):(h(!0),m(!1),g(!1)):"sick"===t?f?(h(!1),m(!1),g(!1)):(h(!1),m(!0),g(!1)):"leave"===t&&(v?(h(!1),m(!1),g(!1)):(h(!1),m(!1),g(!0)))},S=function(e){var t=e.d,s=e.header;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h5",{children:"".concat(s," for ").concat(n.view_id)}),(0,c.jsxs)("table",{className:"table table-striped",children:[(0,c.jsx)("thead",{className:"bg-dark text-white",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"#"}),(0,c.jsx)("th",{children:"Absent Date"})]})}),(0,c.jsx)("tbody",{children:t.map((function(e,t){return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:t+1}),(0,c.jsx)("td",{children:e.date})]})})}))})]})]})},C=o.online_attendance,E=C.length,T=[],O=0;O<E;O++)T[O]=C[E-O-1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("table",{id:"table_div",className:"text-center pt-20",children:[(0,c.jsx)("h5",{className:"fw-bold  badge bg-success text-wrap fs-6",children:"Attendance ".concat(n.view_date?n.view_date:""," of ").concat(n.view_id)}),(0,c.jsxs)("table",{className:"table table-striped",id:"table",children:[(0,c.jsx)("thead",{className:"bg-dark text-white",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{scope:"col",children:"Dates"}),(0,c.jsx)("th",{scope:"col",children:"Classes"}),(0,c.jsx)("th",{scope:"col",children:"Total Attend"})]})}),(0,c.jsx)("tbody",{children:i.map((function(e,t){var n=(0,a.status)(e),s=n.total_class,r=n.presents.length;return"present"===n.f_status?w.push(e):"absent"===n.f_status?j.push(e):"sick"===n.f_status?y.push(e):"leave"===n.f_status&&k.push(e),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.date}),(0,c.jsx)("td",{children:e.classes.map((function(t,n){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("td",{className:"fs-6",id:"".concat(e.name),children:(0,c.jsx)("p",{className:"badge text-wrap ".concat("present"===t.attend?"bg-success":"absent"===t.attend||"camera_off"===t.attend?"bg-danger":"sick"===t.attend||"leave"===t.attend?"bg-primary":"bg-warning"),children:t.attend.toUpperCase()})},"_".concat(n))})}))}),(0,c.jsx)("td",{children:(0,c.jsx)("p",{className:"badge ".concat(s===r?"bg-success":0===r?"bg-danger":"bg-warning text-danger"),children:"".concat(r," / ").concat(s)})})]},"___".concat(t,"___"))})}))})]})]}),(0,c.jsxs)("div",{className:"btn_div",children:[(0,c.jsx)("button",{value:"absent",onClick:N,className:"btn fw-bold shadow-none ".concat(u?"btn-danger text-white":"border-danger text-danger"),children:u?"Hide Absent ":"Show Absent [".concat(j.length,"]")}),(0,c.jsx)("button",{value:"sick",onClick:N,className:"btn ".concat(f?"btn-primary text-white":"border-primary text-primary","  fw-bold shadow-none"),children:f?"Hide Sick  ":"Show Sick  [".concat(y.length,"]")}),(0,c.jsx)("button",{value:"leave",onClick:N,className:"btn ".concat(v?"btn-info text-white":"border-info text-info","  fw-bold shadow-none"),children:v?"Hide Leave ":"Show Leave [".concat(k.length,"]")})]}),u&&j.length>0?(0,c.jsx)(S,{d:j,header:"ABSENTS",inputs:n}):null,f&&y.length>0?(0,c.jsx)(S,{d:y,header:"SICK",inputs:n}):null,v&&k.length>0?(0,c.jsx)(S,{d:k,header:"LEAVE",inputs:n}):null]})}},3398:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var s=n(5861),a=n(8152),r=n(7757),c=n.n(r),i=n(4569),o=n.n(i),l=n(2791),d=n(577),u=n(6383),h=n(408),p=n(184),x=function(e,t){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("th",{scope:"col",children:"Class_".concat(t+1)},"__".concat(t))})},f=function(e){var t,n,s=(0,l.useState)(!1),r=(0,a.Z)(s,2),c=r[0],i=r[1],o=null===e||void 0===e?void 0:e.props,d=null===(t=o[0])||void 0===t?void 0:t.attendance.classes.length,f=[],m=e.inputs,b=function(e){var t=e.d,n=e.header;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h5",{children:"".concat(n," for ").concat(m.view_date.toUpperCase()," ").concat(m.view_class.toUpperCase()," ").concat(m.view_section.toUpperCase())}),(0,p.jsxs)("table",{className:"table table-striped",children:[(0,p.jsx)("thead",{className:"bg-dark text-white",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"#"}),(0,p.jsx)("th",{children:"Name"}),(0,p.jsx)("th",{children:"ID"})]})}),(0,p.jsx)("tbody",{children:t.map((function(e,t){return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:[t+1,"."]}),(0,p.jsx)("td",{children:e.name}),(0,p.jsx)("td",{children:"NCPSC".concat(e.school_id)})]})})}))})]})]})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(h.Z,{id:"test-table-xls-button",className:"btn btn-dark my-2",table:"table_div",filename:"Attendance:_".concat(m.view_id?"":m.view_date,"for_").concat(m.view_id?m.view_id:"__class_".concat(m.view_class).concat(m.view_section?"__section_".concat(m.view_section):"")),sheet:"tablexls",buttonText:"Download as XLS"}),(0,p.jsxs)("table",{id:"table_div",className:"text-center",children:[(0,p.jsx)("h5",{className:"fw-bold  badge bg-success text-wrap fs-6",children:"Attendance: ".concat(m.view_id?"":m.view_date," for ").concat(m.view_id?m.view_id:" Class: ".concat(m.view_class.toUpperCase(),", ").concat(m.view_section?" Section: ".concat(m.view_section.toUpperCase()):""))}),(0,p.jsxs)("table",{className:"table table-striped text-center",id:"table",children:[(0,p.jsx)("thead",{className:"bg-dark text-white",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{scope:"col",children:"#"}),(0,p.jsx)("th",{scope:"col",children:"Name"}),(0,p.jsx)("th",{scope:"col",children:"ID"}),(0,p.jsx)("th",{scope:"col",children:"Class"}),(0,p.jsx)("th",{scope:"col",children:"Section"}),null===(n=o[0])||void 0===n?void 0:n.attendance.classes.map(x),(0,p.jsx)("th",{scope:"col",children:"Total Attend"})]})}),(0,p.jsx)("tbody",{children:o.map((function(e,t){"absent"===(0,u.status)(e.attendance).f_status&&f.push(e.student);var n=[];e.attendance.classes.map((function(e){return"present"===e.attend&&n.push(e),null}));var s=n.length;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("tr",{children:[(0,p.jsxs)("th",{scope:"row",children:[t+1,"."]}),(0,p.jsx)("td",{children:e.student.name}),(0,p.jsx)("td",{children:e.student.school_id}),(0,p.jsx)("td",{children:e.student.class.toUpperCase()}),(0,p.jsx)("td",{children:e.student.section.toUpperCase()}),e.attendance.classes.map((function(t,n){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("td",{className:"fs-6",id:"".concat(e.name),children:(0,p.jsx)("p",{className:"badge text-wrap ".concat("present"===t.attend?"bg-success":"absent"===t.attend||"camera_off"===t.attend?"bg-danger":"sick"===t.attend||"leave"===t.attend?"bg-primary":"bg-warning"),children:t.attend.toUpperCase()})},"_".concat(n))})})),(0,p.jsx)("td",{className:"fs-6",children:(0,p.jsx)("p",{className:"badge ".concat(d===s?"bg-success":0===s?"bg-danger":"bg-warning text-danger"),children:s})})]},"___".concat(t))})}))})]})]}),(0,p.jsx)("button",{onClick:function(){i(!c)},className:"btn btn-primary text-white fw-bold shadow-none",children:c?"Hide Absent Students ":"Show Absent Students [".concat(f.length,"]")}),c?(0,p.jsx)(b,{d:f,header:"ABSENTS",inputs:m}):null]})},m=n(6281),b=n(8216),_=n(6871),v=n(7594),g=n(8836),w=n.n(g),j=function(){document.title="NCPSC || View Attendance";var e=(0,l.useState)(!1),t=(0,a.Z)(e,2),n=t[0],r=t[1],i=(0,l.useState)(""),h=(0,a.Z)(i,2),x=h[0],g=h[1],j=(0,l.useState)(""),y=(0,a.Z)(j,2),k=y[0],N=y[1],S=(0,l.useState)(""),C=(0,a.Z)(S,2),E=C[0],T=C[1],O=(0,l.useState)(""),D=(0,a.Z)(O,2),Z=D[0],A=D[1],I=(0,l.useState)(""),F=(0,a.Z)(I,2),W=F[0],R=F[1],B=(0,_.s0)(),P=function(){var e=(0,s.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.PR)();case 2:t=e.sent,R(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();W&&"admin"!==W.role&&B("/404"),(0,l.useEffect)((function(){P()}),[]);var U=function(){var e=(0,s.Z)(c().mark((function e(t){var n,s,a,r,i,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),n=t.target.view_date.value,s=t.target.view_class.value,a=t.target.view_section.value,r=localStorage.getItem("token"),s&&n&&a){e.next=8;break}return e.abrupt("return",d.Am.error("Invalid Inputs!"));case 8:return N(i={view_class:s,view_date:n,view_section:a,_token:r}),e.next=12,o().post("".concat(v.Sv,"/api/view_attendance_classes"),i);case 12:(l=e.sent).data.success&&g((0,u.filter)(l)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),d.Am.error(e.t0.response.data.message||"Error!"),w()(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,s.Z)(c().mark((function e(t){var n,s,a,r,i,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),n=t.target.view_id.value,s=t.target.view_date.value,a=localStorage.getItem("token"),n){e.next=7;break}return e.abrupt("return",d.Am.error("No Student ID Filled!"));case 7:return N(r={view_date:s,view_id:n,_token:a}),e.next=11,o().post("".concat(v.Sv,"/api/view_attendance_classes"),r);case 11:(i=e.sent).data.success&&(T(i.data.data.online_attendance.reverse()),A(i.data)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.dir(e.t0),d.Am.error((null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.message)||"Error!");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("form",{id:"view_form",onSubmit:U,className:"".concat(m.Z.form_2),children:[(0,p.jsxs)("div",{className:m.Z.cls_div,children:[(0,p.jsx)("p",{children:"Date: "}),(0,p.jsx)("input",{type:"date",name:"view_date"})]}),(0,p.jsxs)("div",{className:m.Z.cls_div,children:[(0,p.jsx)("p",{children:"Class: "}),(0,p.jsx)("select",{className:m.Z.input_1,name:"view_class",id:"view_class",children:(0,p.jsx)("option",{value:"ten",children:"TEN"})})]}),(0,p.jsxs)("div",{className:m.Z.cls_div,children:[(0,p.jsx)("p",{children:"Section: "}),(0,p.jsx)("select",{className:m.Z.input_1,name:"view_section",id:"view_section",children:(0,p.jsx)("option",{value:"kadam",children:"KADAM"})})]}),(0,p.jsx)("br",{}),(0,p.jsxs)("div",{className:m.Z.cls_div,children:[(0,p.jsx)("button",{className:"btn btn-success shadow-none ",id:"view_submit_btn",type:"submit",children:"View Attendance"}),(0,p.jsx)("button",{className:"btn btn-danger shadow-none ",id:"view_submit_btn",type:"reset",children:"Reset Inputs"})]})]})})},M=function(){return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("form",{action:"",onSubmit:L,className:"".concat(m.Z.form_2),children:[(0,p.jsxs)("div",{className:m.Z.cls_div,children:[(0,p.jsx)("p",{children:"Date:"}),(0,p.jsx)("input",{type:"date",placeholder:"",name:"view_date"})]}),(0,p.jsxs)("div",{className:m.Z.cls_div,children:[(0,p.jsx)("p",{children:"Student ID:"}),(0,p.jsx)("input",{type:"text",placeholder:"Enter Student ID",name:"view_id"})]}),(0,p.jsxs)("div",{className:m.Z.cls_div,children:[(0,p.jsx)("button",{className:"btn btn-success shadow-none ",id:"view_submit_btn",type:"submit",children:"View Attendance"}),(0,p.jsx)("button",{className:"btn btn-danger shadow-none ",id:"view_submit_btn",type:"reset",children:"Reset Inputs"})]})]})})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.Ix,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,p.jsx)("h3",{children:n?"Searching by Student ID:":"Searching By Section:"}),(0,p.jsx)("button",{className:"btn shadow-none text-white fw-bold ".concat(n?"btn-success":"btn-dark"),onClick:function(){g(""),A(""),r(!n)},children:n?"Search By Section":"Search By Student ID"}),n?(0,p.jsx)(M,{}):(0,p.jsx)(H,{}),x?(0,p.jsx)(f,{props:x,inputs:k}):null,Z&&E?(0,p.jsx)(b.Z,{d:Z,inputs:k,rev:E}):null]})}},888:function(e,t,n){"use strict";var s=n(9047);function a(){}function r(){}r.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,r,c){if(c!==s){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},408:function(e,t,n){"use strict";var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),a=n(2791),r=i(a),c=i(n(2007));function i(e){return e&&e.__esModule?e:{default:e}}var o={table:c.default.string.isRequired,filename:c.default.string.isRequired,sheet:c.default.string.isRequired,id:c.default.string,className:c.default.string,buttonText:c.default.string},l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDownload=n.handleDownload.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"handleDownload",value:function(){if(!document)return null;if(1!==document.getElementById(this.props.table).nodeType||"TABLE"!==document.getElementById(this.props.table).nodeName)return null;var e=document.getElementById(this.props.table).outerHTML,n=String(this.props.sheet),s=String(this.props.filename)+".xls",a={worksheet:n||"Worksheet",table:e};if(window.navigator.msSaveOrOpenBlob){var r=new Blob(['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>'+e+"</body></html>"]);return document.getElementById("react-html-table-to-excel").click()((function(){window.navigator.msSaveOrOpenBlob(r,s)})),!0}var c=window.document.createElement("a");return c.href="data:application/vnd.ms-excel;base64,"+t.base64(t.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>{table}</body></html>',a)),c.download=s,document.body.appendChild(c),c.click(),document.body.removeChild(c),!0}},{key:"render",value:function(){return r.default.createElement("button",{id:this.props.id,className:this.props.className,type:"button",onClick:this.handleDownload},this.props.buttonText)}}],[{key:"base64",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"format",value:function(e,t){return e.replace(/{(\w+)}/g,(function(e,n){return t[n]}))}}]),t}(a.Component);l.propTypes=o,l.defaultProps={id:"button-download-as-xls",className:"button-download",buttonText:"Download"},t.Z=l},6281:function(e,t){"use strict";t.Z={form:"style_uti_form__3KRm5",form_2:"style_uti_form_2__gvoqw",date_div:"style_uti_date_div__EOiel",cls_div:"style_uti_cls_div__F7lfj",st_id_div:"style_uti_st_id_div__Xh+33",input_1:"style_uti_input_1__n-x9i",button:"style_uti_button__h6xHr"}}}]);
//# sourceMappingURL=398.8f048e1a.chunk.js.map