(self.webpackChunkclient=self.webpackChunkclient||[]).push([[336],{4700:function(e,t,n){"use strict";n(2791);t.Z=n.p+"static/media/student-female.e6fbd1f4c0a76718fa66583429b49361.svg"},4350:function(e,t,n){"use strict";n(2791);t.Z=n.p+"static/media/student-male.54c8517e2f589ed3b00f6128cef948ea.svg"},6383:function(e,t){var n=this;t.status=function(e){var t=[],n=[],s=[],a=[];if(e.classes.map((function(e){return"present"!==e.attend&&"late"!==e.attend||t.push(e),"absent"!==e.attend&&"camera_off"!==e.attend||n.push(e),"sick"===e.attend&&s.push(e),"leave"===e.attend&&a.push(e),null})),t.length+n.length+s.length+a.length===e.classes.length){var c=t.length+n.length+s.length+a.length,r="present";return t.length===c&&(r="present"),s.length>1&&(r="sick"),a.length>1&&(r="leave"),n.length>0&&(r="absent"),{f_status:r,total_class:c,presents:t,absents:n,sicks:s,leaves:a}}},t.counter=function(e){var t,s=(t=Array.isArray(e.online_attendance)?e.online_attendance.map(n.status):n.status(e.online_attendance)).length||1,a=[],c=[],r=[],i=[];if(Array.isArray(t))t.map((function(t){return t?(t.f_status&&"present"===t.f_status&&a.push(t),!t.f_status||"absent"!==t.f_status&&"camera_off"!==t.attend||c.push(t),t.f_status&&"sick"===t.f_status&&r.push(t),t.f_status&&"leave"===t.f_status&&i.push(t),null):console.log(e)}));else{var l=t;"present"===l.f_status&&a.push(l),"absent"!==l.f_status&&"camera_off"!==l.attend||c.push(l),"sick"===l.f_status&&r.push(l),"leave"===l.f_status&&i.push(l)}if(a.length+c.length+r.length+i.length===s)return{present_percent:100*a.length/s,class_count:s,presents:a,absents:c,sicks:r,leaves:i}},t.filter=function(e){var t,n=e.data,s=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.update_date,a=[],c=n.data;if(c.map((function(e){return e.online_attendance.map((function(t){if(t.date===s){var n={student:e,attendance:t};a.push(n)}return null})),null})),a.length===c.length)return a},t.bdDate=function(){var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),n=new Date(t+216e5),s="",a="";return s=n.getMonth()<10?"0".concat(n.getMonth()+1):n.getMonth()+1,a=n.getDate()<10?"0".concat(n.getDate()):n.getDate(),{date:"".concat(n.getFullYear(),"-").concat(s,"-").concat(a),all:n}}},8836:function(e){e.exports=function(e){}},6336:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var s=n(5861),a=n(8152),c=n(7757),r=n.n(c),i=n(4569),l=n.n(i),o=n(2791),u=n(6871),d=n(577),_=n(7594),p=n(6281),f=n(8836),h=n.n(f),v=n(6241),m=n(184),x=function(e){e.history;document.title="NCPSC || Create Attendance";var t=(0,o.useState)(!1),n=(0,a.Z)(t,2),c=n[0],i=n[1],f=(0,o.useState)(""),x=(0,a.Z)(f,2),j=x[0],g=x[1],k=(0,u.s0)(),b=function(){var e=(0,s.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.PR)();case 2:t=e.sent,g(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();j&&"admin"!==j.role&&k("/404"),(0,o.useEffect)((function(){b()}),[]);var N=function(){var e=(0,s.Z)(r().mark((function e(t){var n,s,a,c,o,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),i(!0),n=t.target.date.value,s=t.target.class_count.value,a=t.target.create_class.value,c=t.target.create_section.value,n&&s&&a&&c){e.next=9;break}return e.abrupt("return",d.Am.error("Invalid Inputs"));case 9:return o=localStorage.getItem("token"),u={create_date:n,class_count:s,create_class:a,create_section:c,_token:o},e.next=13,l().post("".concat(_.Sv,"/api/create_attendance"),u);case 13:e.sent.data.success&&(i(!1),d.Am.success("Attendance created for ".concat(n))),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),i(!1),d.Am.error(e.t0.response.data.message||"Error!"),h()(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.Ix,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),c?(0,m.jsx)(v.Z,{}):null,(0,m.jsx)("h3",{children:"Create Attendance"}),(0,m.jsxs)("form",{onSubmit:N,className:"".concat(p.Z.form_2),children:[(0,m.jsxs)("div",{className:p.Z.cls_div,children:[(0,m.jsx)("p",{children:"Date"}),(0,m.jsx)("input",{type:"date","data-date-format":"DD MM YYYY",name:"date",id:"create_date"})]}),(0,m.jsxs)("div",{className:p.Z.cls_div,children:[(0,m.jsx)("p",{children:"Class"}),(0,m.jsx)("select",{className:p.Z.input_1,name:"create_class",id:"create_class",children:(0,m.jsx)("option",{value:"ten",children:"TEN"})})]}),(0,m.jsxs)("div",{className:p.Z.cls_div,children:[(0,m.jsx)("p",{children:"Section"}),(0,m.jsx)("select",{className:p.Z.input_1,name:"create_section",id:"create_section",children:(0,m.jsx)("option",{value:"kadam",children:"KADAM"})})]}),(0,m.jsxs)("div",{className:p.Z.cls_div,children:[(0,m.jsx)("p",{children:"How many classes?"}),(0,m.jsxs)("select",{className:p.Z.input_1,name:"class_count",id:"class_count",children:[(0,m.jsx)("option",{value:"3",children:"3"}),(0,m.jsx)("option",{value:"4",children:"4"}),(0,m.jsx)("option",{value:"5",children:"5"})]})]}),(0,m.jsxs)("div",{className:p.Z.cls_div,children:[(0,m.jsx)("button",{className:"btn btn-success",type:"submit",children:"Create"}),(0,m.jsx)("button",{className:"btn btn-danger",type:"reset",children:"Reset"})]})]})]})},j={content:"profile_sajek_content__q0YKh",profile_card:"profile_sajek_profile_card__KUTmx",card_header:"profile_sajek_card_header__oQIMo",pic:"profile_sajek_pic__e0cr3",name:"profile_sajek_name__+Avqj",profile_info:"profile_sajek_profile_info__Zg2Dt",info_head:"profile_sajek_info_head__Qcd1o",info:"profile_sajek_info__9fjOr",contact_btn:"profile_sajek_contact_btn__EBqno",card_footer:"profile_sajek_card_footer__Wzqfr","animated-gradient":"profile_sajek_animated-gradient__hoP-B"},g=n(4350),k=n(4700),b=n(3504),N=n(6383),Z=function(e){var t=e.user;document.title="NCPSC || Profile";var n=(0,o.useState)(!1),c=(0,a.Z)(n,2),i=c[0],u=c[1],p=(0,o.useState)(""),f=(0,a.Z)(p,2),x=f[0],Z=f[1],C=function(){var e=(0,s.Z)(r().mark((function e(){var n,s,a,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),n=localStorage.getItem("token"),s=null===t||void 0===t?void 0:t.school_id,a={_token:n,view_id:s},e.next=7,l().post("".concat(_.Sv,"/api/view_attendance_classes"),a);case 7:(c=e.sent).data.success&&(d.Am.success("Welcome back ".concat(t.name)),u(!1),Z(c.data)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),u(!1),h()(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){C()}),[t]);var y=function(){document.title="NCPSC || ".concat(t.name.toUpperCase());var e=(0,N.counter)(x.data),n=g.Z;"female"===t.gender&&(n=k.Z);var s=j;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"".concat(s.profile_card_wrap)}),(0,m.jsx)("div",{className:"".concat(s.content),children:(0,m.jsxs)("div",{className:"".concat(s.profile_card),children:[(0,m.jsxs)("div",{className:"".concat(s.card_header),children:[(0,m.jsx)("div",{className:"".concat(s.pic),children:(0,m.jsx)("img",{src:n,alt:""})}),(0,m.jsx)("div",{className:"".concat(s.name),children:t.name.toUpperCase()}),(0,m.jsxs)("div",{className:"".concat(s.profile_info),children:[(0,m.jsxs)("div",{className:"".concat(s.info_head),children:[(0,m.jsx)("p",{children:"ID "}),(0,m.jsx)("p",{children:"Class "}),(0,m.jsx)("p",{children:"Section "}),(0,m.jsx)("p",{children:"Total Class "}),(0,m.jsx)("p",{children:"Total Present "}),(0,m.jsx)("p",{children:"Total Absent "}),(0,m.jsx)("p",{children:"Present % "})]}),(0,m.jsxs)("div",{className:"".concat(s.info),children:[(0,m.jsxs)("p",{children:[": ","".concat(t.school_id)]}),(0,m.jsxs)("p",{children:[": ",t.class.toUpperCase()]}),(0,m.jsxs)("p",{children:[": ",t.section.toUpperCase()]}),(0,m.jsxs)("p",{children:[": ",e.class_count]}),(0,m.jsxs)("p",{children:[": ",e.presents.length]}),(0,m.jsxs)("p",{children:[": ",e.absents.length]}),(0,m.jsxs)("p",{children:[": ",e.present_percent.toFixed(2),"%"]})]})]}),(0,m.jsx)(b.rU,{to:"/dashboard/attendance-log",className:"".concat(s.contact_btn),children:"Goto Attendance"})]}),(0,m.jsx)("div",{className:"".concat(s.card_footer)})]})})]})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.Ix,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),x?(0,m.jsx)(y,{user:t}):null,i?(0,m.jsx)(v.Z,{}):null]})},C=function(){var e=(0,o.useState)(""),t=(0,a.Z)(e,2),n=t[0],c=t[1],i=function(){var e=(0,s.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.PR)();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){i()}),[]),(0,m.jsx)(m.Fragment,{children:n&&"admin"===n.role?(0,m.jsx)(x,{}):(0,m.jsx)(Z,{user:n})})}},6281:function(e,t){"use strict";t.Z={form:"style_uti_form__3KRm5",form_2:"style_uti_form_2__gvoqw",date_div:"style_uti_date_div__EOiel",cls_div:"style_uti_cls_div__F7lfj",st_id_div:"style_uti_st_id_div__Xh+33",input_1:"style_uti_input_1__n-x9i",button:"style_uti_button__h6xHr"}}}]);
//# sourceMappingURL=336.c890f58e.chunk.js.map