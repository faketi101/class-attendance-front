(self.webpackChunkclient=self.webpackChunkclient||[]).push([[181],{6383:function(t,e){var n=this;e.status=function(t){var e=[],n=[],s=[],a=[];if(t.classes.map((function(t){return"present"!==t.attend&&"late"!==t.attend||e.push(t),"absent"!==t.attend&&"camera_off"!==t.attend||n.push(t),"sick"===t.attend&&s.push(t),"leave"===t.attend&&a.push(t),null})),e.length+n.length+s.length+a.length===t.classes.length){var r=e.length+n.length+s.length+a.length,c="present";return e.length===r&&(c="present"),s.length>1&&(c="sick"),a.length>1&&(c="leave"),n.length>0&&(c="absent"),{f_status:c,total_class:r,presents:e,absents:n,sicks:s,leaves:a}}},e.counter=function(t){var e,s=(e=Array.isArray(t.online_attendance)?t.online_attendance.map(n.status):n.status(t.online_attendance)).length||1,a=[],r=[],c=[],l=[];if(Array.isArray(e))e.map((function(e){return e?(e.f_status&&"present"===e.f_status&&a.push(e),!e.f_status||"absent"!==e.f_status&&"camera_off"!==e.attend||r.push(e),e.f_status&&"sick"===e.f_status&&c.push(e),e.f_status&&"leave"===e.f_status&&l.push(e),null):console.log(t)}));else{var i=e;"present"===i.f_status&&a.push(i),"absent"!==i.f_status&&"camera_off"!==i.attend||r.push(i),"sick"===i.f_status&&c.push(i),"leave"===i.f_status&&l.push(i)}if(a.length+r.length+c.length+l.length===s)return{present_percent:100*a.length/s,class_count:s,presents:a,absents:r,sicks:c,leaves:l}},e.filter=function(t){var e,n=t.data,s=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.update_date,a=[],r=n.data;if(r.map((function(t){return t.online_attendance.map((function(e){if(e.date===s){var n={student:t,attendance:e};a.push(n)}return null})),null})),a.length===r.length)return a},e.bdDate=function(){var t=new Date,e=t.getTime()+6e4*t.getTimezoneOffset(),n=new Date(e+216e5),s="",a="";return s=n.getMonth()<10?"0".concat(n.getMonth()+1):n.getMonth()+1,a=n.getDate()<10?"0".concat(n.getDate()):n.getDate(),{date:"".concat(n.getFullYear(),"-").concat(s,"-").concat(a),all:n}}},8836:function(t){t.exports=function(t){}},8216:function(t,e,n){"use strict";var s=n(8152),a=n(6383),r=n(2791),c=n(184);e.Z=function(t){for(var e=t.d,n=t.inputs,l=t.rev,i=e.data,d=(0,r.useState)(!1),u=(0,s.Z)(d,2),o=u[0],h=u[1],_=(0,r.useState)(!1),p=(0,s.Z)(_,2),f=p[0],g=p[1],b=(0,r.useState)(!1),v=(0,s.Z)(b,2),x=v[0],m=v[1],j=[],w=[],k=[],N=[],y=function(t){var e=t.target.value;"absent"===e?o?(h(!1),g(!1),m(!1)):(h(!0),g(!1),m(!1)):"sick"===e?f?(h(!1),g(!1),m(!1)):(h(!1),g(!0),m(!1)):"leave"===e&&(x?(h(!1),g(!1),m(!1)):(h(!1),g(!1),m(!0)))},S=function(t){var e=t.d,s=t.header;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h5",{children:"".concat(s," for ").concat(n.view_id)}),(0,c.jsxs)("table",{className:"table table-striped",children:[(0,c.jsx)("thead",{className:"bg-dark text-white",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"#"}),(0,c.jsx)("th",{children:"Absent Date"})]})}),(0,c.jsx)("tbody",{children:e.map((function(t,e){return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e+1}),(0,c.jsx)("td",{children:t.date})]})})}))})]})]})},A=i.online_attendance,Z=A.length,C=[],D=0;D<Z;D++)C[D]=A[Z-D-1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("table",{id:"table_div",className:"text-center pt-20",children:[(0,c.jsx)("h5",{className:"fw-bold  badge bg-success text-wrap fs-6",children:"Attendance ".concat(n.view_date?n.view_date:""," of ").concat(n.view_id)}),(0,c.jsxs)("table",{className:"table table-striped",id:"table",children:[(0,c.jsx)("thead",{className:"bg-dark text-white",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{scope:"col",children:"Dates"}),(0,c.jsx)("th",{scope:"col",children:"Classes"}),(0,c.jsx)("th",{scope:"col",children:"Total Attend"})]})}),(0,c.jsx)("tbody",{children:l.map((function(t,e){var n=(0,a.status)(t),s=n.total_class,r=n.presents.length;return"present"===n.f_status?j.push(t):"absent"===n.f_status?w.push(t):"sick"===n.f_status?k.push(t):"leave"===n.f_status&&N.push(t),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:t.date}),(0,c.jsx)("td",{children:t.classes.map((function(e,n){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("td",{className:"fs-6",id:"".concat(t.name),children:(0,c.jsx)("p",{className:"badge text-wrap ".concat("present"===e.attend?"bg-success":"absent"===e.attend||"camera_off"===e.attend?"bg-danger":"sick"===e.attend||"leave"===e.attend?"bg-primary":"bg-warning"),children:e.attend.toUpperCase()})},"_".concat(n))})}))}),(0,c.jsx)("td",{children:(0,c.jsx)("p",{className:"badge ".concat(s===r?"bg-success":0===r?"bg-danger":"bg-warning text-danger"),children:"".concat(r," / ").concat(s)})})]},"___".concat(e,"___"))})}))})]})]}),(0,c.jsxs)("div",{className:"btn_div",children:[(0,c.jsx)("button",{value:"absent",onClick:y,className:"btn fw-bold shadow-none ".concat(o?"btn-danger text-white":"border-danger text-danger"),children:o?"Hide Absent ":"Show Absent [".concat(w.length,"]")}),(0,c.jsx)("button",{value:"sick",onClick:y,className:"btn ".concat(f?"btn-primary text-white":"border-primary text-primary","  fw-bold shadow-none"),children:f?"Hide Sick  ":"Show Sick  [".concat(k.length,"]")}),(0,c.jsx)("button",{value:"leave",onClick:y,className:"btn ".concat(x?"btn-info text-white":"border-info text-info","  fw-bold shadow-none"),children:x?"Hide Leave ":"Show Leave [".concat(N.length,"]")})]}),o&&w.length>0?(0,c.jsx)(S,{d:w,header:"ABSENTS",inputs:n}):null,f&&k.length>0?(0,c.jsx)(S,{d:k,header:"SICK",inputs:n}):null,x&&N.length>0?(0,c.jsx)(S,{d:N,header:"LEAVE",inputs:n}):null]})}},5181:function(t,e,n){"use strict";n.r(e);var s=n(5861),a=n(8152),r=n(7757),c=n.n(r),l=n(6281),i=n(2791),d=n(577),u=n(4569),o=n.n(u),h=n(8216),_=n(7594),p=n(6241),f=n(8836),g=n.n(f),b=n(184);e.default=function(){document.title="NCPSC || View Attendance";var t=(0,i.useState)(""),e=(0,a.Z)(t,2),n=e[0],r=e[1],u=(0,i.useState)(""),f=(0,a.Z)(u,2),v=f[0],x=f[1],m=(0,i.useState)(!1),j=(0,a.Z)(m,2),w=j[0],k=j[1],N=(0,i.useState)(""),y=(0,a.Z)(N,2),S=y[0],A=y[1],Z=function(){var t=(0,s.Z)(c().mark((function t(e){var n,s,a,l,i,u,h,p;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.preventDefault(),k(!0),t.next=5,(0,_.PR)();case 5:if(n=t.sent,s=n.school_id,a=e.target.view_date.value,l=localStorage.getItem("token"),s){t.next=11;break}return t.abrupt("return",d.Am.error("No Student ID Filled!"));case 11:return x(i={view_date:a,view_id:s,_token:l}),t.next=15,o().post("".concat(_.Sv,"/api/view_attendance_classes"),i);case 15:(u=t.sent).data.success&&(A(u.data.data.online_attendance.reverse()),r(u.data),k(!1)),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(0),k(!1),d.Am.error((null===t.t0||void 0===t.t0||null===(h=t.t0.response)||void 0===h||null===(p=h.data)||void 0===p?void 0:p.message)||"Error!"),g()(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("form",{action:"",onSubmit:Z,className:"".concat(l.Z.form_2),children:[(0,b.jsxs)("div",{className:l.Z.cls_div,children:[(0,b.jsx)("p",{children:"Date:"}),(0,b.jsx)("input",{type:"date",placeholder:"",name:"view_date"})]}),(0,b.jsxs)("div",{className:l.Z.cls_div,children:[(0,b.jsx)("button",{className:"btn btn-info text-white fw-bold shadow-none ",id:"view_submit_btn",type:"submit",children:"View Attendance"}),(0,b.jsx)("button",{className:"btn btn-danger shadow-none ",id:"view_submit_btn",type:"reset",children:"Reset Inputs"})]})]})})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Ix,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,b.jsx)("h3",{className:"text-info",children:"Student Attendance Log"}),(0,b.jsx)(C,{}),n&&S?(0,b.jsx)(h.Z,{d:n,inputs:v,rev:S}):null,w?(0,b.jsx)(p.Z,{}):null]})}},6281:function(t,e){"use strict";e.Z={form:"style_uti_form__3KRm5",form_2:"style_uti_form_2__gvoqw",date_div:"style_uti_date_div__EOiel",cls_div:"style_uti_cls_div__F7lfj",st_id_div:"style_uti_st_id_div__Xh+33",input_1:"style_uti_input_1__n-x9i",button:"style_uti_button__h6xHr"}}}]);
//# sourceMappingURL=181.9a311fbd.chunk.js.map