(self.webpackChunkclient=self.webpackChunkclient||[]).push([[972],{6383:function(e,t){var n=this;t.status=function(e){var t=[],n=[],s=[],a=[];if(e.classes.map((function(e){return"present"!==e.attend&&"late"!==e.attend||t.push(e),"absent"!==e.attend&&"camera_off"!==e.attend||n.push(e),"sick"===e.attend&&s.push(e),"leave"===e.attend&&a.push(e),null})),t.length+n.length+s.length+a.length===e.classes.length){var o=t.length+n.length+s.length+a.length,r="present";return t.length===o&&(r="present"),s.length>1&&(r="sick"),a.length>1&&(r="leave"),n.length>0&&(r="absent"),{f_status:r,total_class:o,presents:t,absents:n,sicks:s,leaves:a}}},t.counter=function(e){var t,s=(t=Array.isArray(e.online_attendance)?e.online_attendance.map(n.status):n.status(e.online_attendance)).length||1,a=[],o=[],r=[],c=[];if(Array.isArray(t))t.map((function(t){return t?(t.f_status&&"present"===t.f_status&&a.push(t),!t.f_status||"absent"!==t.f_status&&"camera_off"!==t.attend||o.push(t),t.f_status&&"sick"===t.f_status&&r.push(t),t.f_status&&"leave"===t.f_status&&c.push(t),null):console.log(e)}));else{var l=t;"present"===l.f_status&&a.push(l),"absent"!==l.f_status&&"camera_off"!==l.attend||o.push(l),"sick"===l.f_status&&r.push(l),"leave"===l.f_status&&c.push(l)}if(a.length+o.length+r.length+c.length===s)return{present_percent:100*a.length/s,class_count:s,presents:a,absents:o,sicks:r,leaves:c}},t.filter=function(e){var t,n=e.data,s=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.update_date,a=[],o=n.data;if(o.map((function(e){return e.online_attendance.map((function(t){if(t.date===s){var n={student:e,attendance:t};a.push(n)}return null})),null})),a.length===o.length)return a},t.bdDate=function(){var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),n=new Date(t+216e5),s="",a="";return s=n.getMonth()<10?"0".concat(n.getMonth()+1):n.getMonth()+1,a=n.getDate()<10?"0".concat(n.getDate()):n.getDate(),{date:"".concat(n.getFullYear(),"-").concat(s,"-").concat(a),all:n}}},8836:function(e){e.exports=function(e){}},2972:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var s=n(5861),a=n(8152),o=n(7757),r=n.n(o),c=n(577),l=n(4569),i=n.n(l),d=n(2791),u=n(6383),h=n(408),p=n(184),f=function(e){var t=e.data,n=e.inputs;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(h.Z,{id:"test-table-xls-button",className:"btn btn-dark my-2",table:"table_div",filename:"Attendance:_".concat(n.from_date,"_to_").concat(n.to_date,"_for_").concat(n.view_id?n.view_id:"__class_".concat(n.view_class).concat(n.view_section?"__section_".concat(n.view_section):"")),sheet:"tablexls",buttonText:"Download as XLS"}),(0,p.jsxs)("table",{id:"table_div",className:"text-center",children:[(0,p.jsx)("h3",{className:"fw-bold  badge bg-success text-wrap fs-6",children:"Attendance: ".concat(n.from_date,"_to_").concat(n.to_date,"_for_").concat(n.view_id?n.view_id:"_Class_".concat(n.view_class.toUpperCase()).concat(n.view_section?"_Section_".concat(n.view_section.toUpperCase()):""))}),(0,p.jsxs)("table",{class:"table table-striped text-center",id:"table",children:[(0,p.jsx)("thead",{className:"bg-dark text-white",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{scope:"col",children:"#"}),(0,p.jsx)("th",{scope:"col",children:"Name"}),(0,p.jsx)("th",{scope:"col",children:"ID"}),(0,p.jsx)("th",{scope:"col",children:"Class"}),(0,p.jsx)("th",{scope:"col",children:"Section"}),(0,p.jsx)("th",{scope:"col",children:"Total Class"}),(0,p.jsx)("th",{scope:"col",children:"Total Present"}),(0,p.jsx)("th",{scope:"col",children:"Total Absents"}),(0,p.jsx)("th",{scope:"col",children:"Total Leave"}),(0,p.jsx)("th",{scope:"col",children:"Total Sick"}),(0,p.jsx)("th",{scope:"col",children:"Present Percentage"})]})}),(0,p.jsx)("tbody",{children:t.map((function(e,t){var n=(0,u.counter)(e);if(n)return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:[t+1,"."]}),(0,p.jsx)("td",{children:e.student.name}),(0,p.jsx)("td",{children:e.student.school_id}),(0,p.jsx)("td",{children:e.student.class.toUpperCase()}),(0,p.jsx)("td",{children:e.student.section.toUpperCase()}),(0,p.jsx)("td",{className:"fw-bold text-info",children:n.class_count}),(0,p.jsx)("td",{className:"fw-bold text-success",children:n.presents.length}),(0,p.jsx)("td",{className:"fw-bold text-danger",children:n.absents.length}),(0,p.jsx)("td",{children:n.leaves.length}),(0,p.jsx)("td",{children:n.sicks.length}),(0,p.jsx)("td",{className:"fw-bold",children:(0,p.jsx)("p",{className:"badge ".concat(n.present_percent>=80?"bg-success":n.present_percent<80&&n.present_percent>=60?"bg-warning":"bg-danger"),children:"".concat(n.present_percent.toFixed(2),"%")})})]},"__".concat(t+1,"_"))})}))})]})]})]})},_=n(6281),m=n(6871),x=n(7594),v=n(8836),b=n.n(v),g=n(6241),w=function(){document.title="NCPSC || View Attendance";var e=(0,d.useState)(""),t=(0,a.Z)(e,2),n=t[0],o=t[1],l=(0,d.useState)(""),h=(0,a.Z)(l,2),v=h[0],w=h[1],j=(0,d.useState)(!1),y=(0,a.Z)(j,2),k=y[0],E=y[1],T=(0,d.useState)(""),N=(0,a.Z)(T,2),O=N[0],C=N[1],S=(0,m.s0)(),D=function(){var e=(0,s.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.PR)();case 2:t=e.sent,C(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();O&&"admin"!==O.role&&S("/404"),(0,d.useEffect)((function(){D()}),[]);var Z=function(){var e=(0,s.Z)(r().mark((function e(t){var n,s,a,l,d,u,h,p,f,_;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),E(!0),n=t.target.from_date.value,s=t.target.to_date.value,a=t.target.view_class.value,l=t.target.view_section.value,d=t.target.view_id.value,u=localStorage.getItem("token"),w(h={from_date:n,to_date:s,view_class:a,view_section:l,view_id:d,_token:u}),e.next=13,i().post("".concat(x.Sv,"/api/view_attendance"),h);case 13:(p=e.sent).data.success&&(o(p.data),E(!1)),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),E(!1),c.Am.error((null===e.t0||void 0===e.t0||null===(f=e.t0.response)||void 0===f||null===(_=f.data)||void 0===_?void 0:_.message)||"Error!"),b()(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Ix,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,p.jsx)("h3",{children:"View Attendance"}),(0,p.jsxs)("form",{onSubmit:Z,className:"".concat(_.Z.form_2),children:[(0,p.jsxs)("div",{className:_.Z.cls_div,children:[(0,p.jsx)("p",{children:"From date:"}),(0,p.jsx)("input",{type:"date",name:"from_date",id:"from_date",defaultValue:(0,u.bdDate)().date})]}),(0,p.jsxs)("div",{className:_.Z.cls_div,children:[(0,p.jsx)("p",{children:"To date: "}),(0,p.jsx)("input",{type:"date",name:"to_date",id:"to_date"})]}),(0,p.jsxs)("div",{className:_.Z.cls_div,children:[(0,p.jsx)("p",{children:"View Class:"}),(0,p.jsx)("select",{className:_.Z.input_1,name:"view_class",id:"view_class",children:(0,p.jsx)("option",{value:"ten",children:"TEN"})})]}),(0,p.jsxs)("div",{className:_.Z.cls_div,children:[(0,p.jsx)("p",{children:"View Section:"}),(0,p.jsxs)("select",{className:_.Z.input_1,name:"view_section",id:"view_section",children:[(0,p.jsx)("option",{value:"",selected:!0,children:"Select Section"}),(0,p.jsx)("option",{value:"kadam",children:"KADAM"})]})]}),(0,p.jsxs)("div",{className:_.Z.cls_div,children:[(0,p.jsx)("p",{children:"Student ID:"}),(0,p.jsx)("input",{placeholder:"Student ID",className:_.Z.input_1,type:"text",name:"view_id"})]}),(0,p.jsxs)("div",{className:_.Z.cls_div,children:[(0,p.jsx)("button",{id:"view_submit_btn",type:"submit",className:"btn btn-success shadow-none ".concat(_.Z.button),children:"VIEW ATTENDANCE"}),(0,p.jsx)("button",{id:"view_reset_btn",type:"reset",className:"btn btn-danger shadow-none ".concat(_.Z.button),children:"RESET"})]})]}),k?(0,p.jsx)(g.Z,{}):null,n?(0,p.jsx)(f,{data:n.data,inputs:v}):null]})}},888:function(e,t,n){"use strict";var s=n(9047);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,r){if(r!==s){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},408:function(e,t,n){"use strict";var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),a=n(2791),o=c(a),r=c(n(2007));function c(e){return e&&e.__esModule?e:{default:e}}var l={table:r.default.string.isRequired,filename:r.default.string.isRequired,sheet:r.default.string.isRequired,id:r.default.string,className:r.default.string,buttonText:r.default.string},i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDownload=n.handleDownload.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"handleDownload",value:function(){if(!document)return null;if(1!==document.getElementById(this.props.table).nodeType||"TABLE"!==document.getElementById(this.props.table).nodeName)return null;var e=document.getElementById(this.props.table).outerHTML,n=String(this.props.sheet),s=String(this.props.filename)+".xls",a={worksheet:n||"Worksheet",table:e};if(window.navigator.msSaveOrOpenBlob){var o=new Blob(['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>'+e+"</body></html>"]);return document.getElementById("react-html-table-to-excel").click()((function(){window.navigator.msSaveOrOpenBlob(o,s)})),!0}var r=window.document.createElement("a");return r.href="data:application/vnd.ms-excel;base64,"+t.base64(t.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>{table}</body></html>',a)),r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),!0}},{key:"render",value:function(){return o.default.createElement("button",{id:this.props.id,className:this.props.className,type:"button",onClick:this.handleDownload},this.props.buttonText)}}],[{key:"base64",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"format",value:function(e,t){return e.replace(/{(\w+)}/g,(function(e,n){return t[n]}))}}]),t}(a.Component);i.propTypes=l,i.defaultProps={id:"button-download-as-xls",className:"button-download",buttonText:"Download"},t.Z=i},6281:function(e,t){"use strict";t.Z={form:"style_uti_form__3KRm5",form_2:"style_uti_form_2__gvoqw",date_div:"style_uti_date_div__EOiel",cls_div:"style_uti_cls_div__F7lfj",st_id_div:"style_uti_st_id_div__Xh+33",input_1:"style_uti_input_1__n-x9i",button:"style_uti_button__h6xHr"}}}]);
//# sourceMappingURL=972.3bead0fb.chunk.js.map