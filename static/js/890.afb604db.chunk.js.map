{"version":3,"file":"static/js/890.afb604db.chunk.js","mappings":"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","sources":["helpers/attendanceCounter.js","helpers/errorHandler.js","pages/dashboard/Dashboard-components/Admin/N_Table.jsx","pages/dashboard/Dashboard-components/Admin/n_update_attendance.jsx","webpack://client/./src/pages/dashboard/Dashboard-components/Admin/style_uti.module.css?5e52"],"sourcesContent":["exports.status = (d) => {\r\n  //   console.log(d);\r\n  let presents = [];\r\n  let absents = [];\r\n  let sicks = [];\r\n  let leaves = [];\r\n  d.classes.map((cls) => {\r\n    if (cls.attend === \"present\" || cls.attend === \"late\") {\r\n      presents.push(cls);\r\n    }\r\n    if (cls.attend === \"absent\" || cls.attend === \"camera_off\") {\r\n      absents.push(cls);\r\n    }\r\n    if (cls.attend === \"sick\") {\r\n      sicks.push(cls);\r\n    }\r\n    if (cls.attend === \"leave\") {\r\n      leaves.push(cls);\r\n    }\r\n    return null;\r\n  });\r\n  if (\r\n    presents.length + absents.length + sicks.length + leaves.length ===\r\n    d.classes.length\r\n  ) {\r\n    let total_class =\r\n      presents.length + absents.length + sicks.length + leaves.length;\r\n\r\n    let f_status = \"present\";\r\n    if (presents.length === total_class) {\r\n      f_status = \"present\";\r\n    }\r\n    if (sicks.length > 1) {\r\n      f_status = \"sick\";\r\n    }\r\n    if (leaves.length > 1) {\r\n      f_status = \"leave\";\r\n    }\r\n    if (absents.length > 0) {\r\n      f_status = \"absent\";\r\n    }\r\n\r\n    let obj = {\r\n      f_status,\r\n      total_class,\r\n      presents,\r\n      absents,\r\n      sicks,\r\n      leaves,\r\n    };\r\n    return obj;\r\n  }\r\n};\r\nexports.counter = (d) => {\r\n  // console.log(d);\r\n  // console.log(Array.isArray(d.online_attendance));\r\n  const isArray = Array.isArray(d.online_attendance);\r\n  let status;\r\n  if (isArray) {\r\n    status = d.online_attendance.map(this.status);\r\n  } else {\r\n    status = this.status(d.online_attendance);\r\n  }\r\n  let class_count = status.length || 1;\r\n  //   console.log(status);\r\n  let presents = [];\r\n  let absents = [];\r\n  let sicks = [];\r\n  let leaves = [];\r\n  if (Array.isArray(status)) {\r\n    // console.log(status);\r\n    status.map((cls) => {\r\n      if (!cls) {\r\n        return console.log(d);\r\n      }\r\n      if (cls.f_status && cls.f_status === \"present\") {\r\n        presents.push(cls);\r\n      }\r\n      if (\r\n        cls.f_status &&\r\n        (cls.f_status === \"absent\" || cls.attend === \"camera_off\")\r\n      ) {\r\n        absents.push(cls);\r\n      }\r\n      if (cls.f_status && cls.f_status === \"sick\") {\r\n        sicks.push(cls);\r\n      }\r\n      if (cls.f_status && cls.f_status === \"leave\") {\r\n        leaves.push(cls);\r\n      }\r\n      return null;\r\n    });\r\n  } else {\r\n    let cls = status;\r\n    if (cls.f_status === \"present\") {\r\n      presents.push(cls);\r\n    }\r\n    if (cls.f_status === \"absent\" || cls.attend === \"camera_off\") {\r\n      absents.push(cls);\r\n    }\r\n    if (cls.f_status === \"sick\") {\r\n      sicks.push(cls);\r\n    }\r\n    if (cls.f_status === \"leave\") {\r\n      leaves.push(cls);\r\n    }\r\n  }\r\n  if (\r\n    presents.length + absents.length + sicks.length + leaves.length ===\r\n    class_count\r\n  ) {\r\n    let present_percent = (presents.length * 100) / class_count;\r\n    let obj = {\r\n      present_percent,\r\n      class_count,\r\n      presents,\r\n      absents,\r\n      sicks,\r\n      leaves,\r\n    };\r\n    // console.log(class_count);\r\n    // console.log(obj);\r\n    return obj;\r\n  }\r\n};\r\n\r\nexports.filter = (updateData) => {\r\n  let _data = updateData.data;\r\n  let update_date = updateData?.data?.update_date;\r\n\r\n  // console.log(update_date);\r\n  let filtered_data = [];\r\n\r\n  let s_data = _data.data;\r\n  // console.log(s_data);\r\n  s_data.map((d) => {\r\n    d.online_attendance.map((a) => {\r\n      if (a.date === update_date) {\r\n        let obj = {\r\n          student: d,\r\n          attendance: a,\r\n        };\r\n        filtered_data.push(obj);\r\n        // console.log(filtered_data);\r\n      }\r\n      return null;\r\n    });\r\n    return null;\r\n  });\r\n  // console.log(s_data.length);\r\n  // console.log(filtered_data.length);\r\n  if (filtered_data.length === s_data.length) {\r\n    // console.log(filtered_data);\r\n    return filtered_data;\r\n  }\r\n};\r\n\r\n\r\nexports.bdDate = () => {\r\n  var d = new Date();\r\n  var utc = d.getTime() + d.getTimezoneOffset() * 60000;\r\n  var nd = new Date(utc + 3600000 * 6);\r\n\r\n  let month = \"\";\r\n  let day = \"\";\r\n  if (nd.getMonth() < 10) {\r\n    month = `0${nd.getMonth() + 1}`;\r\n  } else {\r\n    month = nd.getMonth() + 1;\r\n  }\r\n\r\n  if (nd.getDate() < 10) {\r\n    day = `0${nd.getDate()}`;\r\n  } else {\r\n    day = nd.getDate();\r\n  }\r\n  let obj = {\r\n    date: `${nd.getFullYear()}-${month}-${day}`,\r\n    all: nd,\r\n  };\r\n\r\n  return obj;\r\n};","const errorHandler = (error) => {\r\n  // console.log(\"============frontend error===========\");\r\n  // console.log(\"============frontend error===========\");\r\n  // console.log(\"============frontend error===========\");\r\n  // console.log(\"============frontend error===========\");\r\n  // console.dir(error);\r\n};\r\n\r\nmodule.exports = errorHandler;\r\n","import axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport errorHandler from \"../../../../helpers/errorHandler\";\r\nimport { server_url } from \"../../../../helpers/auth\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nconst TH = function (d, i) {\r\n  // console.log(\"called\");\r\n  return (\r\n    <>\r\n      <th key={`__${i}`} scope=\"col\">{`Class_${i + 1}`}</th>\r\n    </>\r\n  );\r\n};\r\n\r\nconst Table = (props) => {\r\n  const [editTr, setEditTr] = useState(false);\r\n  // console.log(props);\r\n  const Single = (d, i) => {\r\n    const change_attendance = async (e) => {\r\n      try {\r\n        const student = d;\r\n        const st_class_name = e.target.id;\r\n        let st_d_class = \"\";\r\n        const target = e.target;\r\n        if (target) {\r\n          target.className = \"\";\r\n          if (target.value === \"present\") {\r\n            target.className = \"text-success\";\r\n          } else if (\r\n            target.value === \"absent\" ||\r\n            target.value === \"camera_off\"\r\n          ) {\r\n            target.className = \"text-danger\";\r\n          } else {\r\n            target.className = \"text-info\";\r\n          }\r\n        }\r\n        const updated_attend = e.target.value;\r\n        const token = localStorage.getItem(\"token\");\r\n        d.attendance.classes.map((da) => {\r\n          if (da.name === st_class_name) {\r\n            st_d_class = da;\r\n          }\r\n          return null;\r\n        });\r\n\r\n        const submit_obj = {\r\n          student,\r\n          st_d_class,\r\n          updated_attend,\r\n          update_date: student.attendance.date,\r\n          _token: token,\r\n        };\r\n        console.log(submit_obj);\r\n\r\n        const res = await axios.post(\r\n          `${server_url}/api/update_attendance`,\r\n          submit_obj\r\n        );\r\n        if (res?.data?.success) {\r\n          toast.success(res?.data?.message || \"Attendance Updated\");\r\n        }\r\n        // console.log(res);\r\n      } catch (error) {\r\n        toast.error(\"Something went wrong. Please try again later\");\r\n        errorHandler(error);\r\n      }\r\n    };\r\n    const single_att = (ac, i) => {\r\n      const EditOption = () => {\r\n        return (\r\n          <>\r\n            <select\r\n              id={`${ac.name}`}\r\n              name=\"attend\"\r\n              onChange={change_attendance}\r\n              className=\"\"\r\n            >\r\n              <option value={ac.attend} selected disabled hidden>\r\n                {ac.attend.toUpperCase()}\r\n              </option>\r\n              <option className=\"text-success\" value=\"present\">\r\n                PRESENT\r\n              </option>\r\n              <option className=\"text-danger\" value=\"absent\">\r\n                ABSENT\r\n              </option>\r\n              <option className=\"text-danger\" value=\"camera_off\">\r\n                CAMERA_OFF\r\n              </option>\r\n              <option className=\"text-warning\" value=\"late\">\r\n                LATE\r\n              </option>\r\n              <option className=\"text-info\" value=\"sick\">\r\n                SICK\r\n              </option>\r\n              <option className=\"text-info\" value=\"leave\">\r\n                LEAVE\r\n              </option>\r\n            </select>\r\n          </>\r\n        );\r\n      };\r\n\r\n      return (\r\n        <>\r\n          <td className=\"fs-6\" id={`${d.name}`} key={`_${i}`}>\r\n            <p\r\n              className={`badge text-wrap ${\r\n                ac.attend === \"present\"\r\n                  ? \"bg-success\"\r\n                  : ac.attend === \"absent\" || ac.attend === \"camera_off\"\r\n                  ? \"bg-danger\"\r\n                  : ac.attend === \"sick\" || ac.attend === \"leave\"\r\n                  ? \"bg-primary\"\r\n                  : \"bg-warning\"\r\n              }`}\r\n            >\r\n              {editTr ? <EditOption /> : ac.attend.toUpperCase()}\r\n            </p>\r\n          </td>\r\n        </>\r\n      );\r\n    };\r\n\r\n    const edit_attendance = (e) => {\r\n      if (editTr) {\r\n        setEditTr(false);\r\n        const update_submit_btn = document?.getElementById(\"update_submit_btn\");\r\n        update_submit_btn.click();\r\n      } else {\r\n        setEditTr(true);\r\n      }\r\n    };\r\n\r\n    // console.log(\"single\");\r\n    // console.log(d);\r\n    let total_attend = [];\r\n    d.attendance.classes.map((d) => {\r\n      if (d.attend === \"present\") {\r\n        total_attend.push(d);\r\n      }\r\n      return null;\r\n    });\r\n    // console.log(total_attend);\r\n    return (\r\n      <>\r\n        <tr key={`___${i}`}>\r\n          <th scope=\"row\">{i + 1}.</th>\r\n          <td>{d.student.name}</td>\r\n          <td>{d.student.school_id}</td>\r\n          {d.attendance.classes.map(single_att)}\r\n          <td className=\"fs-6\">\r\n            <p className={`badge bg-primary`}>{total_attend.length}</p>\r\n          </td>\r\n          <td>\r\n            <button\r\n              className=\"badge bg-info text-white fw-bold\"\r\n              onClick={edit_attendance}\r\n            >\r\n              {editTr ? \"Update\" : \"Edit\"}\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </>\r\n    );\r\n  };\r\n\r\n  let data = props?.props;\r\n  // let class_count = data[0].attendance.classes.length;\r\n  // console.log(class_count);\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer\r\n        position=\"top-center\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n      />\r\n      <table className=\"table table-striped text-center\">\r\n        <thead className=\"bg-dark text-white\">\r\n          <tr>\r\n            <th scope=\"col\">#</th>\r\n            <th scope=\"col\">Name</th>\r\n            <th scope=\"col\">ID</th>\r\n            {data[0]?.attendance.classes.map(TH)}\r\n            <th scope=\"col\">Total Attend</th>\r\n            <th scope=\"col\">Edit</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{data.map(Single)}</tbody>\r\n      </table>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import axios from \"axios\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport Table from \"./N_Table\";\r\nimport { bdDate, filter } from \"../../../../helpers/attendanceCounter\";\r\nimport style from \"./style_uti.module.css\";\r\nimport { server_url } from \"../../../../helpers/auth\";\r\nimport { getUser } from \"../../../../helpers/auth\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Loading from \"../../../../components/loading\";\r\nimport errorHandler from \"../../../../helpers/errorHandler\";\r\nconst UpdateAttendance = () => {\r\n  document.title =\"NCPSC || Update Attendance\"\r\n\r\n  // const [dataStatus, setDataStatus] = useState(false);\r\n  // const [updateData, setUpdateData] = useState(\"\");\r\n  const [filterStatus, setFilterStatus] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [u_ser, setUser] = useState(\"\");\r\n  let navigate = useNavigate();\r\n\r\n  const checkAuth = async () => {\r\n    let b_user = await getUser();\r\n    setUser(b_user);\r\n  };\r\n  if (u_ser && u_ser.role !== \"admin\") {\r\n    navigate(\"/\");\r\n  }\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, []);\r\n\r\n  // if (dataStatus) {\r\n  //   // var filtered_data = filter(updateData);\r\n  //   setDataStatus(filter(updateData));\r\n  // }\r\n  // function a() {\r\n  //   setTimeout(() => {\r\n  //     setFilterStatus(true);\r\n  //     console.log(\"done\");\r\n  //   }, 2000);\r\n  // }\r\n  const get_attendance = async (e) => {\r\n    try {\r\n      e?.preventDefault();\r\n      setLoading(true);\r\n      const update_date =\r\n        e?.target?.update_date?.value || e?.update_date?.value;\r\n      const update_class =\r\n        e?.target?.update_class?.value || e?.update_class?.value;\r\n      const update_section =\r\n        e?.target?.update_section?.value || e?.update_section?.value;\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      const submit_obj = {\r\n        update_date,\r\n        update_class,\r\n        update_section,\r\n        _token: token,\r\n      };\r\n      const res = await axios.post(\r\n        `${server_url}/api/get_attendance`,\r\n        submit_obj\r\n      );\r\n\r\n      if (res.data.success) {\r\n        // setUpdateData(res);\r\n        // setDataStatus(true);\r\n        setFilterStatus(filter(res));\r\n        setLoading(false);\r\n        // console.log(res.data);\r\n      }\r\n    } catch (error) {\r\n      // setDataStatus(false);\r\n\r\n      setLoading(false);\r\n      toast.error(error?.response?.data?.message);\r\n      errorHandler(error);\r\n    }\r\n  };\r\n\r\n  // console.log(filterStatus);\r\n  return (\r\n    <>\r\n      <ToastContainer\r\n        position=\"top-center\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n      />\r\n      {loading ? <Loading /> : null}\r\n      <h3>Update Attendance</h3>\r\n\r\n      <form\r\n        id=\"update_form\"\r\n        onSubmit={get_attendance}\r\n        className={`${style.form_2}`}\r\n      >\r\n        <div className={style.cls_div}>\r\n          <p>Update attendance date</p>\r\n          <input type=\"date\" name=\"update_date\" defaultValue={bdDate().date} />\r\n        </div>\r\n        <div className={style.cls_div}>\r\n          <p>Update Class</p>\r\n          <select\r\n            className={style.input_1}\r\n            name=\"update_class\"\r\n            id=\"update_class\"\r\n          >\r\n            <option value=\"ten\">TEN</option>\r\n          </select>\r\n        </div>\r\n        <div className={style.cls_div}>\r\n          <p>Update Section</p>\r\n          <select\r\n            className={style.input_1}\r\n            name=\"update_section\"\r\n            id=\"update_section\"\r\n          >\r\n            <option value=\"kadam\">KADAM</option>\r\n          </select>\r\n        </div>\r\n        <div className={style.cls_div}>\r\n          <button\r\n            className=\"btn btn-success shadow-none\"\r\n            id=\"update_submit_btn\"\r\n            type=\"submit\"\r\n          >\r\n            View Attendance\r\n          </button>\r\n        </div>\r\n      </form>\r\n      {filterStatus ? <Table props={filterStatus} re={get_attendance} /> : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UpdateAttendance;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"style_uti_form__3KRm5\",\"form_2\":\"style_uti_form_2__gvoqw\",\"date_div\":\"style_uti_date_div__EOiel\",\"cls_div\":\"style_uti_cls_div__F7lfj\",\"st_id_div\":\"style_uti_st_id_div__Xh+33\",\"input_1\":\"style_uti_input_1__n-x9i\",\"button\":\"style_uti_button__h6xHr\"};"],"names":["exports","status","d","presents","absents","sicks","leaves","classes","map","cls","attend","push","length","total_class","f_status","counter","class_count","Array","isArray","online_attendance","console","log","present_percent","filter","updateData","_data","data","update_date","filtered_data","s_data","a","date","obj","student","attendance","bdDate","Date","utc","getTime","getTimezoneOffset","nd","month","day","getMonth","getDate","getFullYear","all","module","error","TH","i","scope","props","useState","editTr","setEditTr","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","className","change_attendance","e","st_class_name","target","id","st_d_class","value","updated_attend","token","localStorage","getItem","da","name","submit_obj","_token","axios","server_url","res","success","toast","message","errorHandler","total_attend","school_id","ac","EditOption","onChange","selected","disabled","hidden","toUpperCase","onClick","document","getElementById","click","title","filterStatus","setFilterStatus","loading","setLoading","u_ser","setUser","navigate","useNavigate","checkAuth","getUser","b_user","role","useEffect","get_attendance","preventDefault","update_class","update_section","response","onSubmit","style","type","defaultValue","re"],"sourceRoot":""}